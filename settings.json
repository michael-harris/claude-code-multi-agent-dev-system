{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "DevTeam plugin default settings â€” applied when plugin is installed",

  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  },

  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/pre-tool-use-hook.sh"
          },
          {
            "type": "prompt",
            "prompt": "The agent is about to modify a file. Check if this modification is within the current task scope. If the file being modified is clearly unrelated to the task, return ok:false with a reason. If it's reasonable, return ok:true."
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/pre-tool-use-hook.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/post-tool-use-hook.sh"
          },
          {
            "type": "agent",
            "agent": "quality-gate-analyzer",
            "prompt": "Analyze the bash command output. Did tests pass? Did lint pass? Did security scans pass? Extract structured results and update the SQLite state database via scripts/state.sh with gate pass/fail status."
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/post-tool-use-hook.sh"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "hooks/stop-hook.sh"
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'source scripts/events.sh 2>/dev/null && log_event \"agent_start\" \"orchestration\" \"Subagent started\" \"{}\" 2>/dev/null || true'"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'source scripts/events.sh 2>/dev/null && log_event \"agent_stop\" \"orchestration\" \"Subagent completed\" \"{}\" 2>/dev/null || true'"
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'source scripts/events.sh 2>/dev/null && log_event \"task_completed\" \"orchestration\" \"Task marked complete\" \"{}\" 2>/dev/null || true'"
          }
        ]
      }
    ],
    "WorktreeCreate": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'source scripts/events.sh 2>/dev/null && log_event \"worktree_created\" \"infrastructure\" \"Worktree created\" \"{}\" 2>/dev/null || true'"
          }
        ]
      }
    ],
    "WorktreeRemove": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'source scripts/events.sh 2>/dev/null && log_event \"worktree_removed\" \"infrastructure\" \"Worktree removed\" \"{}\" 2>/dev/null || true'"
          }
        ]
      }
    ],
    "TeammateIdle": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A teammate agent has gone idle. Check if there are remaining tasks in the backlog that this teammate could work on. If there are pending tasks, return ok:false with a message suggesting the next task. If all tasks are assigned or complete, return ok:true."
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "hooks/pre-compact.sh"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "startup|resume",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/session-start.sh"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "hooks/session-end.sh"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "hooks/persistence-hook.sh"
          }
        ]
      }
    ]
  }
}
